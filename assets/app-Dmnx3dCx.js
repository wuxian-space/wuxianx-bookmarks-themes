import{P as W,r as R,c as V,Q as K,w as U,R as ne,d as w,S as r,U as I,V as k,W as l,X as o,Y as j,Z as ae,_ as le,$ as f,a0 as g,E as A,a1 as b,a2 as x,F as v,a as m,a3 as F,a4 as G,a5 as Y,a6 as ie,a7 as ce,m as Z,n as ue,a8 as de,a9 as fe,aa as pe}from"./vendor-DErUT_q0.js";import{p as _e}from"./pinyin-pro-BsXuhoYV.js";import{u as he,a as me,b as ke}from"./vueuse-CUHbnYs5.js";import{k as ve,t as ge}from"./lodash-es-DcUU13Lv.js";import{l as ye,m as be,n as Ce,s as N,o as Be}from"./tdesign-icons-vue-next-iaqvHP_0.js";import{B as q,a as Q,S as Ie,C as Se,A as xe,b as we,D as $e,I as Re,c as Ae}from"./tdesign-vue-next-yzBSmg4F.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}})();const T=W("bookmarks",()=>{const p=R([]),e=V(()=>{return t(p.value);function t(a,i=[]){return a.forEach(c=>{const{children:h}=c;i.push(c),h&&t(h,i)}),i}}),n=V(()=>e.value.reduce((t,a)=>(t[a.id]=a,t),{}));function u(t){p.value=t.map(i=>a(i));function a(i,c){const{children:h,..._}=i,s={..._,pinyin:_e(i.title,{toneType:"none",nonZh:"consecutive",separator:""}).toLocaleLowerCase()};return c&&(s.parentsPath||(s.parentsPath=[]),s.parentsPath.push(...(c==null?void 0:c.parentsPath)||[],c)),Array.isArray(h)&&(s.children=h.map(d=>a(d,s))),s}}return{bookmarks:p,flatBookmarks:e,bookmarksMap:n,setBookmarks:u}}),X={bgColor:"#f2f2f2",textColor:"#333",fontFamily:"BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif",fontSize:14,borderColor:"#eee"},J={asideWidth:240,asideBgColor:"#ffff",asideTextColor:"#999",asideItemColor:"#333",asideActiveItemColor:"#0052d9",asideItemMinHeight:36},ee={headerHeight:48,headerBgColor:"#fff",headerTextColor:"#333",headerTitleFontSize:18},te={searchButtonBgColor:"#f6f6f7",searchButtonHoverBgColor:"#f6f6f7",searchButtonColor:"rgba(60, 60, 67, .78)",searchButtonHoverColor:"rgba(60, 60, 67, .78)",searchButtonHeight:30,searchButtonFontSize:14,searchButtonBorderRadius:5,searchButtonBorderColor:"transparent",searchButtonHoverBorderColor:"#0052d9",searchResultItemBgColor:"#fff",searchResultItemHoverBgColor:"#fff",searchResultItemColor:"#333",searchResultItemHoverColor:"#333",searchResultItemBorderColor:"#f2f2f2",searchResultItemHoverBorderColor:"#0052d9",searchResultItemBorderRadius:5},oe={linkColor:"#555",linkIconColor:"#0052d9",linkBgColor:"#fff",linkMinWidth:0,linkMaxWidth:"100%",linkHeight:32,linkRadius:4,linkBorderColor:"#ccc",linkBorderStyle:"solid",linkBorderWidth:1,linkAlign:"left",linkPaddingLeft:10,linkPaddingRight:10,linkHoverColor:"#0052d9",linkHoverIconColor:"red",linkHoverBgColor:"#0052d913",linkHoverBorderColor:"#0052d9"},se=W("theme-config",()=>{const p=R({...X,...J,...ee,...te,...oe,title:"无限书签",logo:"./logo.png"});return{config:p,title:V(()=>p.value.title),logo:V(()=>p.value.logo)}}),re="b";function He(){const p=se(),e=K("default-theme-layout");return{setLayout(){return n(X),n(oe),n(ee),n(te),n(J),e}};function n(t,a=e){Object.keys(t).forEach(i=>{u(i,a,c=>typeof c=="number"?`${c}px`:c)})}function u(t,a,i){const c=`--${re}-${ve(t)}`,h=he(c,a);return U(()=>p.config[t],_=>{setTimeout(()=>{typeof i=="function"?h.value=i(_):h.value=_.toString()},0)},{immediate:!0}),h}}function $(p){return ne(p,{namespace:re,strict:!1})}const z=w({__name:"scrollbar",props:{tag:{default:"div"},scrollbarWidth:{default:5}},setup(p){const e=$("scrollbar");return(n,u)=>(r(),I(ae(n.tag),{class:l(o(e)()),style:j({"--scrollbar-width":n.scrollbarWidth+"px"})},{default:k(()=>[le(n.$slots,"default")]),_:3},8,["class","style"]))}}),Pe=w({__name:"footer",setup(p){const e=$("theme-layout-footer");return(n,u)=>(r(),f("div",{class:l(o(e)())},[g("div",{class:l(o(e)("copyright"))},[A("© "+b(new Date().getFullYear())+" by ",1),u[0]||(u[0]=g("a",{href:"https://bookmarks.wuxian.space",target:"_blank",rel:"noopener noreferrer nofollow"},"wuxianx-bookmarks",-1))],2)],2))}}),Le=["id"],Fe=["href","title"],Ve=["title","onClick"],Te=w({__name:"main",setup(p){const e=$("theme-layout-main"),n=T(),u=R({}),t=(h,_)=>{const{id:s}=_;u.value[s]||(u.value[s]=[_]),u.value[s].push(h),_.displayedChildren=h.children},a=(h,_)=>{const{id:s}=_,d=u.value[s],S=d.findIndex(H=>H.id===h.id);d.splice(S+1),(d==null?void 0:d.length)<=1?(delete _.displayedChildren,delete u.value[s]):_.displayedChildren=h.children},i=R(),{height:c}=me(i,{width:0,height:48},{box:"border-box"});return(h,_)=>{const s=ye,d=q,S=Q,H=be,M=Ie,E=Se;return r(),I(z,{class:l(o(e)())},{default:k(()=>[g("div",{class:l(o(e)("content")),style:j({minHeight:`calc(100% - ${o(c)}px)`})},[(r(!0),f(v,null,x(o(n).bookmarks,(P,O)=>{var C,L;return r(),f(v,null,[(C=P.children)!=null&&C.length?(r(),f("section",{key:0,class:l(o(e)("group"))},[(r(!0),f(v,null,x((L=P.children)==null?void 0:L.filter(y=>!y.url),y=>(r(),f("div",{id:y.id,class:l(o(e)("links"))},[O>0?(r(),f("div",{key:0,class:l(o(e)("group-name"))},b(P.title),3)):F("",!0),m(E,{title:y.title,"header-bordered":""},{default:k(()=>[u.value[y.id]?(r(),I(S,{key:0,style:{"margin-bottom":"10px"}},{default:k(()=>[(r(!0),f(v,null,x(u.value[y.id],(B,D)=>(r(),I(d,{onClick:Ge=>a(B,y)},G({default:k(()=>[A(" "+b(B.title),1)]),_:2},[D===0?{name:"icon",fn:k(()=>[m(s)]),key:"0"}:void 0]),1032,["onClick"]))),256))]),_:2},1024)):F("",!0),m(M,{"break-line":""},{default:k(()=>[(r(!0),f(v,null,x(y.displayedChildren||y.children,B=>(r(),f(v,null,[B.url?(r(),f("a",{key:0,href:B.url,title:B.title,class:l(o(e)("link")),target:"_blank",rel:"noopener noreferrer nofollow"},b(B.title),11,Fe)):(r(),f("span",{key:1,title:B.title,class:l(o(e)("link")),onClick:D=>t(B,y)},[m(H),A(" "+b(B.title),1)],10,Ve))],64))),256))]),_:2},1024)]),_:2},1032,["title"])],10,Le))),256))],2)):F("",!0)],64)}),256))],6),m(Pe,{ref_key:"footerRef",ref:i},null,512)]),_:1},8,["class"])}}}),Me={key:0,class:"t-anchor__item"},Ee=["href","title"],Oe=w({__name:"aside",setup(p){const e=$("theme-layout-aside"),n=T(),u=({e:t})=>{t.preventDefault()};return(t,a)=>{const i=Ce,c=we,h=xe;return r(),I(z,{ref:"default-theme-aside",class:l(o(e)())},{default:k(()=>[m(h,{class:l(o(e)("anchor")),bounds:50,container:".b-theme-layout__main",onClick:u},{default:k(()=>[(r(!0),f(v,null,x(o(n).bookmarks,_=>{var s;return r(),f(v,null,[(s=_.children)!=null&&s.length?(r(),f("div",{key:0,class:l(o(e)("group"))},[g("div",{class:l(o(e)("group-name"))},b(_.title),3),g("nav",{class:l(o(e)("group-nav")),container:".b-theme-layout__main"},[(r(!0),f(v,null,x(_.children,d=>(r(),f(v,null,[d.url?(r(),f("div",Me,[g("a",{href:d.url,title:d.title,class:"t-anchor__item-link",target:"_blank",rel:"noopener noreferrer nofollow"},[A(b(d.title)+" ",1),m(i)],8,Ee)])):(r(),I(c,{key:1,href:`#${d.id}`,title:d.title},null,8,["href","title"]))],64))),256))],2)],2)):F("",!0)],64)}),256))]),_:1},8,["class"])]),_:1},8,["class"])}}}),ze=["href"],De=w({__name:"search",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(p){const e=$("search"),n=Y(),u=T(),t=ie(p,"visible"),{ctrl_k:a}=ke({passive:!1,onEventFired(s){s.ctrlKey&&s.key==="k"&&s.type==="keydown"&&s.preventDefault()}});ce(a,()=>{t.value=!t.value});const i=K("keyword-input"),c=R("");U(t,async s=>{var d;if(!s){c.value="";return}await ue(),(d=i.value)==null||d.focus()});const h=ge(s=>{c.value=s},80),_=V(()=>c.value?u.flatBookmarks.filter(s=>{var S;return(s.title.includes(c.value)||((S=s==null?void 0:s.pinyin)==null?void 0:S.includes(c.value.toLocaleLowerCase())))&&s.url}):[]);return(s,d)=>{const S=N,H=N,M=Re,E=q,P=Q,O=$e;return r(),f(v,null,[g("button",{class:l(o(e)()),onClick:d[0]||(d[0]=C=>t.value=!0)},[m(S),g("span",{class:l(o(e)("text"))},"搜索",2),g("b",{class:l(o(e)("key"))},"Ctrl K",2)],2),m(O,Z({visible:t.value,"onUpdate:visible":d[1]||(d[1]=C=>t.value=C)},o(n),{"close-btn":!1,header:!1,footer:!1,width:"600px",attach:"body",class:o(e)("dialog")}),{default:k(()=>[m(M,{ref:"keyword-input",value:c.value,placeholder:"请输入名称 or 拼音",size:"large",class:l(o(e)("input")),clearable:"",onChange:o(h)},G({prefixIcon:k(()=>[m(H)]),_:2},[_.value.length?{name:"suffix",fn:k(()=>[A(" 共 "+b(_.value.length)+" 条结果 ",1)]),key:"0"}:void 0]),1032,["value","class","onChange"]),m(z,{class:l(o(e)("result-list")),"scrollbar-width":0},{default:k(()=>[(r(!0),f(v,null,x(_.value,C=>{var L;return r(),f("a",{href:C.url,target:"_blank",class:l(o(e)("result-list__item"))},[g("span",null,b(C.title),1),(L=C.parentsPath)!=null&&L.length?(r(),I(P,{key:0},{default:k(()=>[(r(!0),f(v,null,x(C.parentsPath,y=>(r(),I(E,{disabled:""},{default:k(()=>[A(b(y.title),1)]),_:2},1024))),256))]),_:2},1024)):F("",!0)],10,ze)}),256))]),_:1},8,["class"])]),_:1},16,["visible","class"])],64)}}}),Ne=["src"],We=w({__name:"header",setup(p){const e=Y(),n=$("theme-layout-header"),u=se(),{logo:t,title:a}=de(u);return(i,c)=>(r(),f("div",Z(o(e),{class:o(n)()}),[g("img",{class:l(o(n)("logo")),src:o(t),alt:"logo"},null,10,Ne),g("h1",{class:l(o(n)("title"))},b(o(a)),3),m(De)],16))}}),Ke=w({__name:"layout",setup(p){const e=$("theme-layout");He().setLayout();const n=R(!1);return(u,t)=>{const a=Be,i=Ae;return r(),f("div",{ref:"default-theme-layout",class:l(o(e)())},[m(We,{class:l(o(e)("header"))},null,8,["class"]),m(Oe,{class:l([o(e)("aside"),{"is-fold":n.value}])},null,8,["class"]),m(Te,{class:l(o(e)("main"))},null,8,["class"]),g("span",{class:l([o(e)("aside-toggle"),{"is-fold":n.value}]),onClick:t[0]||(t[0]=c=>n.value=!n.value)},[m(a)],2),m(i,{theme:"primary",size:"small",container:".b-theme-layout__main",class:l(o(e)("back-top"))},null,8,["class"])],2)}}}),Ue=w({__name:"App",setup(p){return(e,n)=>(r(),I(Ke))}}),je=[];fe(Ue,async p=>{const{app:e}=p,n=pe();e.use(n),T().setBookmarks(je)});
